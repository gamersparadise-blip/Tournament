<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin - Tournament Dashboard</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <style>
    .screenshot-img {
        width: 100px;
        border: 1px solid #555;
        border-radius: 6px;
        margin-top: 4px;
    }
    .reg-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    .reg-table th, .reg-table td {
        padding: 10px;
        border: 1px solid #444;
        text-align: center;
    }
    select, input, button {
        margin: 6px 0;
    }
  </style>
</head>
<body class="neon-theme">
  <div class="container">
    <h2>ðŸ›  Admin Panel</h2>

    <h3>Create New Tournament</h3>
    <form method="POST">
      <input type="text" name="name" placeholder="Tournament Name" required>
      <input type="date" name="date" required>
      <input type="time" name="time" required>
      <input type="text" name="room_id" placeholder="Room ID" required>
      <input type="text" name="room_pass" placeholder="Room Password" required>
      <button type="submit">Create</button>
    </form>

    <h3>ðŸ“‹ Filter Registered Users</h3>
    <form method="GET">
      <label for="filter_tournament">Filter by Tournament:</label>
      <select name="filter_tournament" onchange="this.form.submit()">
        <option value="">-- Show All --</option>
        {% for tid, tname in tournaments %}
          <option value="{{ tid }}" {% if selected_id == tid|string %}selected{% endif %}>{{ tname }}</option>
        {% endfor %}
      </select>
    </form>

    <h3>ðŸŽ® Registered Users</h3>
    <table class="reg-table">
      <tr>
        <th>Name</th>
        <th>Mobile</th>
        <th>PUBG ID</th>
        <th>Game</th>
        <th>Tournament</th>
        <th>Payment Screenshot</th>
      </tr>
      {% for reg in registrations %}
      <tr>
        <td>{{ reg[0] }}</td>
        <td>{{ reg[1] }}</td>
        <td>{{ reg[2] }}</td>
        <td>{{ reg[3] }}</td>
        <td>{{ reg[4] }}</td>
        <td>
          {% if reg[5] %}
            <img src="{{ url_for('static', filename='../uploads/' + reg[5]) }}" class="screenshot-img">
          {% else %}
            No Image
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
</body>
</html>
